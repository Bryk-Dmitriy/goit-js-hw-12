{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function searchImagesByQuery(query, page) {\n  const URL = 'https://pixabay.com/api/';\n  const API_KEY = '45461935-4caf943777d43ef92827c838d';\n\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: `${error}`,\n    });\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createImages(data) {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  const list = document.querySelector('.gallery');\n  let images = data.hits\n    .map(hit =>\n        `\n    <li class=\"photo-card\">\n      <a href=\"${hit.largeImageURL}\">\n        <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" loading=\"lazy\" width=\"360\" height=\"152\"/>\n      </a>\n      <div class=\"info\">\n        <p class=\"likes\"><b>Likes:</b> ${hit.likes}</p>\n        <p class=\"vievs\"><b>Views:</b> ${hit.views}</p>\n        <p class=\"comments\"><b>Comments:</b> ${hit.comments}</p>\n        <p class=\"dowloads\"><b>Downloads:</b> ${hit.downloads}</p>\n      </div>\n      </li>\n  `)\n    .join('');\n  list.insertAdjacentHTML('beforeend', images);\n  lightbox.refresh();\n}\n\nexport function clearImages() {\n  const list = document.querySelector('.gallery');\n  list.innerHTML = '';\n}\n\nexport function scrollDown() {\n  const list = document.querySelector('.gallery');\n  const height = list.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport searchImagesByQuery from './js/pixabay-api';\nimport { createImages, clearImages, scrollDown } from './js/render-functions';\n\nconst form = document.querySelector('.form-gallery');\nconst input = document.querySelector('.form-input');\nconst loader = document.querySelector('.loader');\nconst button = document.querySelector('.load');\nconst message = document.querySelector('.bottom');\n\nconst per_page = 15;\n\nlet page = 1;\nlet wordFromStart = '';\n\nform.addEventListener('submit', handleSubmit);\nbutton.addEventListener('click', handleClick);\n\nasync function handleSubmit(event) {\n  clearImages();\n  event.preventDefault();\n  loader.classList.remove('hidden');\n  message.classList.remove('show-text');\n  let wordForSearch = input.value.trim();\n  wordFromStart = wordForSearch;\n  page = 1;\n  if (wordForSearch === '') {\n    iziToast.error({\n      class: 'custom-error',\n      position: 'topRight',\n      message: 'Search field cannot be empty!',\n    });\n    loader.classList.add('hidden');\n    return;\n  }\n  try {\n    const data = await searchImagesByQuery(wordForSearch, page, per_page);\n    if (data.total === 0) {\n      iziToast.error({\n        class: 'custom-error',\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      loader.classList.add('hidden');\n      return;\n    } else {\n      await createImages(data);\n      button.classList.remove('hidden');\n    }\n    if (data.hits.length < per_page) {\n      button.classList.add('hidden');\n      message.classList.add('show-text');\n      iziToast.info({\n        class: 'custom-error',\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n    loader.classList.add('hidden');\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: error.message,\n    });\n    loader.classList.add('hidden');\n  }\n}\n\nasync function handleClick(event) {\n  page += 1;\n  loader.classList.remove('hidden');\n  button.classList.add('hidden');\n  try {\n    const data = await searchImagesByQuery(wordFromStart, page, per_page);\n    if (data.hits.length < per_page) {\n      button.classList.add('hidden');\n      message.classList.add('show-text');\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      button.classList.remove('hidden');\n    }\n    await createImages(data);\n    scrollDown();\n    loader.classList.add('hidden');\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: error.message,\n    });\n    loader.classList.add('hidden');\n  }\n}"],"names":["searchImagesByQuery","query","page","URL","API_KEY","axios","error","createImages","data","lightbox","SimpleLightbox","list","images","hit","clearImages","scrollDown","height","form","input","loader","button","message","per_page","wordFromStart","handleSubmit","handleClick","event","wordForSearch","iziToast"],"mappings":"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"}